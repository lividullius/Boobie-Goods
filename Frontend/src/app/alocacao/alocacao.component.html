<div class="container py-4">
  <!-- Cabeçalho com botões lado a lado -->
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="m-0">Alocações</h2>
    
    <!-- Botões lado a lado -->
    <div class="d-flex gap-2">
      <button class="btn criar-contrato-button"
              data-bs-toggle="modal"
              data-bs-target="#modalAlocacao">
        Criar Alocação
      </button>
    </div>
  </div>

  <!-- Mensagem de erro -->
  <div *ngIf="error" class="alert alert-warning mb-3" role="alert">
    <i class="bi bi-exclamation-triangle me-2"></i>
    {{ error }}
    <button type="button" class="btn btn-sm btn-outline-warning ms-2" (click)="refreshAlocacoes()">
      Tentar novamente
    </button>
  </div>

  <!-- Card / Tabela de Alocações -->
  <div class="card shadow-sm">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="table-light">
          <tr>
            <th>Pessoa</th>
            <th>Perfil</th>
            <th>Projeto</th>
            <th>Horas Semanais</th>
          </tr>
        </thead>
        <tbody>
          <!-- Loading -->
          <tr *ngIf="loading">
            <td colspan="4" class="text-center py-4">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Carregando...</span>
              </div>
              <p class="mt-2 mb-0">Carregando alocações...</p>
            </td>
          </tr>
          
          <!-- Dados -->
          <tr *ngFor="let alocacao of alocacoes" [class.d-none]="loading">
            <td>{{ alocacao.pessoa }}</td>
            <td>
              <span class="badge bg-secondary">{{ alocacao.perfil }}</span>
            </td>
            <td>{{ alocacao.projeto }}</td>
            <td>{{ alocacao.horasSemanal }} h/semana</td>
          </tr>
          
          <!-- Estado vazio -->
          <tr *ngIf="!loading && alocacoes.length === 0">
            <td colspan="4" class="text-center py-4 text-muted">
              <i class="bi bi-calendar-x fs-1 d-block mb-2"></i>
              Nenhuma alocação encontrada
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal para criar alocação -->
<app-modal-criacao-alocacao></app-modal-criacao-alocacao>